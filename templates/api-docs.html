<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/docs.css') }}">
</head>
<body>
    <div class="animated-background" id="animated-background"></div>
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="logo-container">
                <img src="https://i.ibb.co.com/sH8sDrm/img-icon.png" alt="Logo" onerror="this.onerror=null; this.src='https://api.ryochinel.my.id/favicon.ico';">
                <span>API Docs</span>
                <button class="sidebar-close" aria-label="Close sidebar">
                    <i class='bx bx-x'></i>
                </button>
            </div>
        </div>
        <nav>
            <ul class="sidebar-menu">
                <li class="sidebar-dropdown">
                    <a href="#" class="sidebar-menu-item">
                        <i class='bx bx-download mr-2'></i>
                        <span>Downloader</span>
                        <i class='bx bx-chevron-down ml-auto'></i>
                    </a>
                    <ul class="sidebar-submenu">
                        <li><a href="#lahelu-downloader">Lahelu Downloader</a></li>
                        <li><a href="#youtube-mp4-downloader">YouTube MP4 Downloader</a></li>
                        <li><a href="#tiktok-downloader">Tiktok Downloader</a></li>
                    </ul>
                </li>
                <li class="sidebar-dropdown">
                    <a href="#" class="sidebar-menu-item">
                        <i class='bx bx-wrench mr-2'></i>
                        <span>Tools</span>
                        <i class='bx bx-chevron-down ml-auto'></i>
                    </a>
                    <ul class="sidebar-submenu">
                        <li><a href="#sample-tool">Sample Tool</a></li>
                        <li><a href="#brat-tool">Brat Text to Image</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
    </div>
    <div class="main-content">
        <header>
            <div class="header-left">
                <button class="sidebar-toggle" aria-label="Toggle sidebar">
                    <i class='bx bx-menu'></i>
                </button>
                <h1>API Documentation</h1>
            </div>
            <div class="theme-toggle">
                <input type="checkbox" id="theme-toggle" class="theme-toggle-checkbox">
                <label for="theme-toggle" class="theme-toggle-label">
                    <i class='bx bx-sun'></i>
                    <i class='bx bx-moon'></i>
                </label>
            </div>
        </header>
        <main>
            <section id="lahelu-downloader" class="endpoint">
                <h2>Lahelu Downloader</h2>
                <p class="endpoint-description">Download Lahelu Post</p>
                <span class="endpoint-method">GET</span>
                <span class="endpoint-url">/api/lahelu</span>
                <div class="details">
                    <div class="details-title">
                        <span>Show Details</span>
                        <i class='bx bx-chevron-down'></i>
                    </div>
                    <div class="details-content">
                        <h3>Sample Request:</h3>
                        <pre><code>{
    "url": "https://lahelu.com/post/123456"
}</code></pre>
                        <h3>Sample Response:</h3>
                        <pre><code>{
    "status": true,
    "result": {
        "postID": "123456",
        "userID": "user123",
        "title": "Sample Post",
        "sensitive": false,
        "hashtags": [
            "sample",
            "post"
        ],
        "createTime": 1629571966000
    }
}</code></pre>
                    </div>
                </div>
                <div class="input-group">
                    <input type="text" id="apiUrl1" placeholder="Enter Lahelu post URL">
                    <button onclick="tryItOut('apiUrl1', 'errorMsg1', 'result1', '/api/lahelu')">Try it out</button>
                    <p id="errorMsg1" class="error-message"></p>
                </div>
                <div id="result1" class="result-container">
                    <div class="result-header">
                        <div class="result-title">Result:</div>
                        <i class='bx bx-copy copy-icon'></i>
                    </div>
                    <pre class="result-content"></pre>
                    <img class="result-image" style="display: none; max-width: 100%; height: auto;">
                    <button class="download-button" style="display: none;">Download Image</button>
                </div>
                <div class="button-group">
                    <button onclick="toggleResult('result1')">Show/Hide Result</button>
                </div>
            </section>
            <section id="youtube-mp4-downloader" class="endpoint">
                <h2>YouTube MP4 Downloader</h2>
                <p class="endpoint-description">Download YouTube video as MP4</p>
                <span class="endpoint-method">GET</span>
                <span class="endpoint-url">/api/ytmp4</span>
                <div class="details">
                    <div class="details-title">
                        <span>Show Details</span>
                        <i class='bx bx-chevron-down'></i>
                    </div>
                    <div class="details-content">
                        <h3>Sample Request:</h3>
                        <pre><code>{
    "url": "https://www.youtube.com/watch?v=dQw4w9WgXcQ"
}</code></pre>
                        <h3>Sample Response:</h3>
                        <pre><code>{
    "status": true,
    "result": {
        "title": "Rick Astley - Never Gonna Give You Up (Official Music Video)",
        "duration": "3:32",
        "quality": "720p",
        "downloadUrl": "https://example.com/download/dQw4w9WgXcQ.mp4"
    }
}</code></pre>
                    </div>
                </div>
                <div class="input-group">
                    <input type="text" id="apiUrl2" placeholder="Enter YouTube video URL">
                    <button onclick="tryItOut('apiUrl2', 'errorMsg2', 'result2', '/api/ytmp4')">Try it out</button>
                    <p id="errorMsg2" class="error-message"></p>
                </div>
                <div id="result2" class="result-container">
                    <div class="result-header">
                        <div class="result-title">Result:</div>
                        <i class='bx bx-copy copy-icon'></i>
                    </div>
                    <pre class="result-content"></pre>
                    <img class="result-image" style="display: none; max-width: 100%; height: auto;">
                    <button class="download-button" style="display: none;">Download Image</button>
                </div>
                <div class="button-group">
                    <button onclick="toggleResult('result2')">Show/Hide Result</button>
                </div>
            </section>
            <section id="tiktok-downloader" class="endpoint">
                <h2>Tiktok Downloader</h2>
                <p class="endpoint-description">Download Tiktok Post</p>
                <span class="endpoint-method">GET</span>
                <span class="endpoint-url">/api/tiktok</span>
                <div class="details">
                    <div class="details-title">
                        <span>Show Details</span>
                        <i class='bx bx-chevron-down'></i>
                    </div>
                    <div class="details-content">
                        <h3>Sample Request:</h3>
                        <pre><code>{
    "url": "https://www.tiktok.com/@username/video/1234567890123456789"
}</code></pre>
                        <h3>Sample Response:</h3>
                        <pre><code>{
    "creator": "AmmarBN",
    "result": {
        "cover": "https://example.com/image.jpeg",
        "no_watermark": "https://example.com/download",
        "origin_cover": "https://example.com/download",
        "title": "Title Video"
    }
}</code></pre>
                    </div>
                </div>
                <div class="input-group">
                    <input type="text" id="apiUrl3" placeholder="Enter Tiktok URL">
                    <button onclick="tryItOut('apiUrl3', 'errorMsg3', 'result3', '/api/tiktok')">Try it out</button>
                    <p id="errorMsg3" class="error-message"></p>
                </div>
                <div id="result3" class="result-container">
                    <div class="result-header">
                        <div class="result-title">Result:</div>
                        <i class='bx bx-copy copy-icon'></i>
                    </div>
                    <pre class="result-content"></pre>
                    <img class="result-image" style="display: none; max-width: 100%; height: auto;">
                    <button class="download-button" style="display: none;">Download Image</button>
                </div>
                <div class="button-group">
                    <button onclick="toggleResult('result3')">Show/Hide Result</button>
                </div>
            </section>
            <section id="instagram-downloader" class="endpoint">
                <h2>Tiktok Downloader</h2>
                <p class="endpoint-description">Download Instagram Post</p>
                <span class="endpoint-method">GET</span>
                <span class="endpoint-url">/api/igdl</span>
                <div class="details">
                    <div class="details-title">
                        <span>Show Details</span>
                        <i class='bx bx-chevron-down'></i>
                    </div>
                    <div class="details-content">
                        <h3>Sample Request:</h3>
                        <pre><code>{
    "url": "https://www.instagram.com/ammarbn27/reel/Czbqnpcvuft/"
}</code></pre>
                        <h3>Sample Response:</h3>
                        <pre><code>{
  "creator": "AmmarBN",
  "result": "https://dl.snapcdn.app/saveinsta?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1cmwiOiJodHRwczovL3Njb250ZW50LmNkbmluc3RhZ3JhbS5jb20vbzEvdi90MTYvZjEvbTgyLzlFNDQwMzE0NzVCMjdCQUEyQ0Y0REFBNUI2ODQ1REExX3ZpZGVvX2Rhc2hpbml0Lm1wND9zdHA9ZHN0LW1wNCZlZmc9ZXlKeFpWOW5jbTkxY0hNaU9pSmJYQ0pwWjE5M1pXSmZaR1ZzYVhabGNubGZkblJ6WDI5MFpsd2lYU0lzSW5abGJtTnZaR1ZmZEdGbklqb2lkblJ6WDNadlpGOTFjbXhuWlc0dVkyeHBjSE11WXpJdU56SXdMbUpoYzJWc2FXNWxJbjAmX25jX2NhdD0xMTEmdnM9OTAwODg1ODgxNjM0NzAzXzE1OTcyNzY2NzAmX25jX3ZzPUhCa3NGUUlZVDJsblgzaHdkbDl5WldWc2MxOXdaWEp0WVc1bGJuUmZjSEp2WkM4NVJUUTBNRE14TkRjMVFqSTNRa0ZCTWtOR05FUkJRVFZDTmpnME5VUkJNVjkyYVdSbGIxOWtZWE5vYVc1cGRDNXRjRFFWQUFMSUFRQVZBaGc2Y0dGemMzUm9jbTkxWjJoZlpYWmxjbk4wYjNKbEwwZENjbEEzVW1aT1lWVnhia2g1TkVSQlFrTm1hRTVIYjAxM1VtVmljVjlGUVVGQlJoVUNBc2dCQUNnQUdBQWJBQlVBQUNiaWh1MkJ2NXowUHhVQ0tBSkRNeXdYUURaTXpNek16TTBZRW1SaGMyaGZZbUZ6Wld4cGJtVmZNVjkyTVJFQWRmNEhBQSUzRCUzRCZjY2I9OS00Jm9oPTAwX0FZQmo4X21sWGROTEJCdGxId1I5b1N5VjFkbzlma2NDUTZVRHp3d0JKUm1NUEEmb2U9Njc1MjQzMTMmX25jX3NpZD1kODg1YTIiLCJmaWxlbmFtZSI6IlNhdmVDbGlwLkFwcF85RTQ0MDMxNDc1QjI3QkFBMkNGNERBQTVCNjg0NURBMV92aWRlb19kYXNoaW5pdC5tcDQiLCJuYmYiOjE3MzMzMjkxMTQsImV4cCI6MTczMzMzMjcxNCwiaWF0IjoxNzMzMzI5MTE0fQ.cZRKRXnkXiouUBnf1W2jPuQ6AVTfO4hX4ZVJ0ZEPEEQ",
  "status": true
}</code></pre>
                    </div>
                </div>
                <div class="input-group">
                    <input type="text" id="apiUrl4" placeholder="Enter Instagram URL">
                    <button onclick="tryItOut('apiUrl4', 'errorMsg4', 'result4', '/api/igdl')">Try it out</button>
                    <p id="errorMsg4" class="error-message"></p>
                </div>
                <div id="result4" class="result-container">
                    <div class="result-header">
                        <div class="result-title">Result:</div>
                        <i class='bx bx-copy copy-icon'></i>
                    </div>
                    <pre class="result-content"></pre>
                    <img class="result-image" style="display: none; max-width: 100%; height: auto;">
                    <button class="download-button" style="display: none;">Download Image</button>
                </div>
                <div class="button-group">
                    <button onclick="toggleResult('result4')">Show/Hide Result</button>
                </div>
            </section>
            <section id="sample-tool" class="endpoint">
                <h2>Sample Tool</h2>
                <p class="endpoint-description">This is a sample tool</p>
                <span class="endpoint-method">GET</span>
                <span class="endpoint-url">/api/sample</span>
                <div class="details">
                    <div class="details-title">
                        <span>Show Details</span>
                        <i class='bx bx-chevron-down'></i>
                    </div>
                    <div class="details-content">
                        <h3>Sample Request:</h3>
                        <pre><code>{
    "param": "example"
}</code></pre>
                        <h3>Sample Response:</h3>
                        <pre><code>{
    "status": true,
    "result": "This is a sample result"
}</code></pre>
                    </div>
                </div>
                <div class="input-group">
                    <input type="text" id="apiUrl5" placeholder="Enter sample parameter">
                    <button onclick="tryItOut('apiUrl5', 'errorMsg5', 'result5', '/api/sample')">Try it out</button>
                    <p id="errorMsg5" class="error-message"></p>
                </div>
                <div id="result5" class="result-container">
                    <div class="result-header">
                        <div class="result-title">Result:</div>
                        <i class='bx bx-copy copy-icon'></i>
                    </div>
                    <pre class="result-content"></pre>
                    <img class="result-image" style="display: none; max-width: 100%; height: auto;">
                    <button class="download-button" style="display: none;">Download Image</button>
                </div>
                <div class="button-group">
                    <button onclick="toggleResult('result5')">Show/Hide Result</button>
                </div>
            </section>
            <section id="brat-tool" class="endpoint">
                <h2>Brat Text to Image</h2>
                <p class="endpoint-description">Convert text to a Brat image</p>
                <span class="endpoint-method">GET</span>
                <span class="endpoint-url">/api/brat</span>
                <div class="details">
                    <div class="details-title">
                        <span>Show Details</span>
                        <i class='bx bx-chevron-down'></i>
                    </div>
                    <div class="details-content">
                        <h3>Sample Request:</h3>
                        <pre><code>{
    "text": "Your text here"
}</code></pre>
                        <h3>Sample Response:</h3>
                        <p>An image file (PNG format)</p>
                    </div>
                </div>
                <div class="input-group">
                    <input type="text" id="bratText" placeholder="Enter text for Brat image">
                    <button onclick="tryItOut('bratText', 'errorMsgBrat', 'resultBrat', '/api/brat')">Try it out</button>
                    <p id="errorMsgBrat" class="error-message"></p>
                </div>
                <div id="resultBrat" class="result-container">
                    <div class="result-header">
                        <div class="result-title">Result:</div>
                    </div>
                    <img class="result-image" style="display: none; max-width: 100%; height: auto;">
                    <button class="download-button" style="display: none;">Download Image</button>
                </div>
                <div class="button-group">
                    <button onclick="toggleResult('resultBrat')">Show/Hide Result</button>
                </div>
            </section>
        </main>
        <footer>
            <p>Copyright © 2024 AmmarBN. All rights reserved.</p>
            <p>api.ryochinel.my.id</p>
        </footer>
    </div>
    <script>
    	document.addEventListener('DOMContentLoaded', () => {
    const animatedBackground = document.getElementById('animated-background');
    const themeToggle = document.getElementById('theme-toggle');
    const body = document.body;
    const sidebarToggle = document.querySelector('.sidebar-toggle');
    const sidebarClose = document.querySelector('.sidebar-close');
    const sidebar = document.querySelector('.sidebar');
    const detailsTitles = document.querySelectorAll('.details-title');
    const copyIcons = document.querySelectorAll('.copy-icon');

    // Create animated background
    for (let i = 0; i < 20; i++) {
        const square = document.createElement('div');
        square.classList.add('square');
        square.style.left = `${Math.random() * 100}%`;
        square.style.top = `${Math.random() * 100}%`;
        square.style.width = `${Math.random() * 100 + 50}px`;
        square.style.height = square.style.width;
        square.style.animationDuration = `${Math.random() * 10 + 10}s`;
        square.style.animationDelay = `${Math.random() * 5}s`;
        animatedBackground.appendChild(square);
    }

    // Theme toggle
    themeToggle.addEventListener('change', () => {
        body.classList.toggle('light');
    });

    // Sidebar toggle
    sidebarToggle.addEventListener('click', (e) => {
        e.stopPropagation();
        sidebar.classList.toggle('active');
    });

    // Sidebar close
    sidebarClose.addEventListener('click', () => {
        sidebar.classList.remove('active');
    });

    // Close sidebar when clicking outside on mobile
    document.addEventListener('click', (e) => {
        if (window.innerWidth <= 768 && sidebar.classList.contains('active') && !sidebar.contains(e.target) && !sidebarToggle.contains(e.target)) {
            sidebar.classList.remove('active');
        }
    });

    // Smooth scrolling for sidebar links
    document.querySelectorAll('.sidebar a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            const targetElement = document.querySelector(targetId);
            if (targetElement) {
                targetElement.scrollIntoView({
                    behavior: 'smooth'
                });
                if (window.innerWidth <= 768) {
                    sidebar.classList.remove('active');
                }
            }
        });
    });

    // Sidebar dropdowns
    const sidebarDropdowns = document.querySelectorAll('.sidebar-dropdown');
    sidebarDropdowns.forEach(dropdown => {
        const menuItem = dropdown.querySelector('.sidebar-menu-item');
        menuItem.addEventListener('click', (e) => {
            e.preventDefault();
            dropdown.classList.toggle('active');
        });
    });

    // Toggle details content
    detailsTitles.forEach(title => {
        title.addEventListener('click', () => {
            const content = title.nextElementSibling;
            const icon = title.querySelector('i');
            content.style.display = content.style.display === 'block' ? 'none' : 'block';
            icon.classList.toggle('bx-chevron-down');
            icon.classList.toggle('bx-chevron-up');
        });
    });

    // Copy result to clipboard
    copyIcons.forEach(icon => {
        icon.addEventListener('click', () => {
            const resultContent = icon.closest('.result-container').querySelector('.result-content');
            navigator.clipboard.writeText(resultContent.textContent).then(() => {
                alert('Result copied to clipboard!');
            }).catch(err => {
                console.error('Failed to copy text: ', err);
            });
        });
    });

    // Add resize event listener
    window.addEventListener('resize', () => {
        if (window.innerWidth > 768) {
            sidebar.classList.remove('active');
        }
    });
});

// Function to toggle result visibility
function toggleResult(resultId) {
    const resultContainer = document.getElementById(resultId);
    if (resultContainer.style.display === 'none' || resultContainer.style.display === '') {
        resultContainer.style.display = 'block';
    } else {
        resultContainer.style.display = 'none';
    }
}

// Function to make API requests
async function tryItOut(inputId, errorMsgId, resultId, endpoint) {
    const input = document.getElementById(inputId);
    const errorMsg = document.getElementById(errorMsgId);
    const resultContainer = document.getElementById(resultId);
    const resultContent = resultContainer.querySelector('.result-content');
    const resultImage = resultContainer.querySelector('.result-image');
    const downloadButton = resultContainer.querySelector('.download-button');
    const copyIcon = resultContainer.querySelector('.copy-icon');
    const url = input.value.trim();

    if (!url) {
        errorMsg.textContent = 'Please enter a valid input';
        return;
    }

    errorMsg.textContent = '';
    resultContainer.style.display = 'none';
    
    // Add loading indicator
    const loadingIndicator = document.createElement('div');
    loadingIndicator.classList.add('loading');
    input.parentNode.appendChild(loadingIndicator);

    try {
        let apiUrl = `https://api.ryochinel.my.id${endpoint}`;
        if (endpoint === '/api/brat') {
            apiUrl += `?text=${encodeURIComponent(url)}`;
        } else {
            apiUrl += `?url=${encodeURIComponent(url)}`;
        }

        const response = await fetch(apiUrl);
        const contentType = response.headers.get('content-type');

        if (contentType.startsWith('image/')) {
            const blob = await response.blob();
            const imageUrl = URL.createObjectURL(blob);
            resultImage.src = imageUrl;
            resultImage.style.display = 'block';
            if (resultContent) resultContent.style.display = 'none';
            if (copyIcon) copyIcon.style.display = 'none';
            downloadButton.style.display = 'block';
            downloadButton.onclick = () => {
                const a = document.createElement('a');
                a.href = imageUrl;
                a.download = 'download.' + contentType.split('/')[1];
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            };
        } else {
            const data = await response.json();
            if (resultContent) {
                resultContent.textContent = JSON.stringify(data, null, 2);
                resultContent.style.display = 'block';
            }
            resultImage.style.display = 'none';
            if (copyIcon) copyIcon.style.display = 'block';
            downloadButton.style.display = 'none';
        }

        resultContainer.style.display = 'block';
    } catch (error) {
        errorMsg.textContent = 'An error occurred while fetching the data. Please try again.';
        console.error('Error:', error);
    } finally {
        // Remove loading indicator
        loadingIndicator.remove();
    }
}
    </script>
</body>
</html>
